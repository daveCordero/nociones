<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<!-- meta se define en document ready
<meta name="viewport" content="width=1050px, target-densitydpi=device-dpi, user-scalable=no, initial-scale=0.7, maximum-scale=0.7">-->

<title>Correspondencia uno a uno</title>


<link href="css/global.css" rel="stylesheet" type="text/css" />
<link href="css/e06.css" rel="stylesheet" type="text/css" />


<script type="text/javascript" src="js/googleapis/jquery.min.js"></script>
<script type="text/javascript" src='js/jquery.transit.min.js'></script>
<script type="text/javascript" src="js/kinetic-v4.6.0.min.js"></script>


<script language="javascript" type="text/javascript">

var proxPantalla = 1; //valor inicial, incrementa con respuesta Ok

var audioElement = document.createElement('audio');
audioElement.setAttribute('autoplay', 'autoplay');
$.get();

function aubtn() {
	audioElement.setAttribute('src', 'http://librosparatodoscr.com/apps/nociones/android/audio/plop.ogg');
	audioElement.play();
}

$(window).load(function(){
	$("#pre-load-web").fadeOut(1000,function(){
		//eliminamos la capa de precarga
	    $(this).remove();
	    //permitimos scroll
	    $("body").css({"overflow-y":"auto"});
	});        
});

function nextPage(){
	window.location.href = proxEjercicio;
}

function flipPage(){
	$('#contenido').transition({
		perspective: '1000px',
		rotateY: '180deg',
		opacity: 0,
	}, 500, 'out',function(){nextPage();});
}

function txBox() {
	var timerTxG = setTimeout(function() {
		$(txblock).fadeIn(300);
		clearTimeout(timerTxG);
	}, 500);
}

function closeWelcome() {
	$("#pantalla00").animate({ 'margin-top':650 }, 150, function(){ $(this).css({ display:'none' }); });
	//alert('pantallaActual: ' + proxPantalla);
	pant01();
	$(pantallaActual).css({ display:'block' });
	$(pantallaActual).animate({ 'margin-top':0 }, 150 );
}

var pantallaActual = '';

function goInfo() {
	//alert('Pantalla Actual: ' + proxPantalla);
	pantallaActual = '#pantalla01';
	$(pantallaActual).animate({ 'margin-top':650 }, 150, function(){ $(this).css({ display:'none' }); });
	$("#pantalla00").css({ display:'block' });
	$("#pantalla00").animate({ 'margin-top':10 }, 300);
}

function closeOk() {
	$("#respuestaOk").fadeOut(100);
	pantFinal();
}

function pant01() {
	pantallaActual = '#pantalla01';
	
	txblock = '#txG1';
	txBox();
	
	stageB = new Kinetic.Stage({
		container: 'container1',
		width: 960,
		height: 600,
	});
	
	//posicion animal imgs
	xCord1 = 15; 		yCord1 = 160;
	xCord2 = 205; 		yCord2 = 160;
	xCord3 = 395; 		yCord3 = 160;
	xCord4 = 585; 		yCord4 = 160;
	xCord5 = 775; 		yCord5 = 160;
	
	//posicion black imgs
	xbCord1 = 205; 		ybCord1 = 340;  //img1
	xbCord2 = 395; 		ybCord2 = 340;  //img2
	xbCord3 = 15;		ybCord3 = 340;	//img3
	xbCord4 = 775; 		ybCord4 = 340;  //img4
	xbCord5 = 585; 		ybCord5 = 340;  //img5
	
	var sources = {
		beach: 		'bg.png',
		
		img1: 		'imgVaca.png',
		img1_glow: 	'imgVaca_glow.png',
		img1_black: 'imgVaca_black.png',
		
		img2: 		'imgGallo.png',
		img2_glow: 	'imgGallo_glow.png',
		img2_black: 'imgGallo_black.png',
		
		img3: 		'imgOveja.png',
		img3_glow: 	'imgOveja_glow.png',
		img3_black: 'imgOveja_black.png',
		
		img4: 		'imgCerdo.png',
		img4_glow: 	'imgCerdo_glow.png',
		img4_black: 'imgCerdo_black.png',
		
		img5: 		'imgPescado.png',
		img5_glow: 	'imgPescado_glow.png',
		img5_black: 'imgPescado_black.png',
	};//fin sources*/
	
	loadImages(sources, initStage);//kinetic
}//fin pant01

function pantFinal() {
	var timerPantFinal = setTimeout(function() {
		proxEjercicio = 'index.html';
		flipPage();
		clearTimeout(timerPantFinal);
	}, 1000);
}

// Listen for orientation changes
window.addEventListener("orientationchange", function() {
  //alert(window.orientation); //Announce the new orientation number
  if (window.orientation == 0){
	  $("#turnScreen").fadeIn(0);
  }
  /*chrome no funciona en esta orientacion
  if (window.orientation == 180){
	  $("#turnScreen").fadeIn(0);
  }*/
  if (window.orientation == 90){
	  $("#turnScreen").fadeOut(0);
  }
  if (window.orientation == -90){
	  $("#turnScreen").fadeOut(0);
  }
}, false);

$(document).ready(function() {
	
	
	//define meta viewport scale
	if ( screen.width > 1100 ) {
		//alert('mayor que 1100');
		$("head").append('<meta name="viewport" content="initial-scale=1.1, maximum-scale=1.1, minimum-scale=.5, user-scalable=yes, height=device-height, width=device-width, target-densityDpi=device-dpi" />');
	} else if ( (screen.width < 1100) && (screen.width >= 1000) ) {
		$("head").append('<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=.5, user-scalable=yes, height=device-height, width=device-width, target-densityDpi=device-dpi" />');
	} else if ( (screen.width < 1000) && (screen.width >= 900) ) {
		$("head").append('<meta name="viewport" content="initial-scale=.9, maximum-scale=1.0, minimum-scale=.5, user-scalable=yes, height=device-height, width=device-width, target-densityDpi=device-dpi" />');
	} else if ( (screen.width < 900) && (screen.width >= 800) ) {
		$("head").append('<meta name="viewport" content="initial-scale=.8, maximum-scale=1.0, minimum-scale=.5, user-scalable=yes, height=device-height, width=device-width, target-densityDpi=device-dpi" />');
	} else if ( (screen.width < 800) && (screen.width >= 700) ) {
		$("head").append('<meta name="viewport" content="initial-scale=.7, maximum-scale=1.0, minimum-scale=.5, user-scalable=yes, height=device-height, width=device-width, target-densityDpi=device-dpi" />');
	} else if ( (screen.width < 700) && (screen.width >= 600) ) {
		$("head").append('<meta name="viewport" content="initial-scale=.6, maximum-scale=1.0, minimum-scale=.5, user-scalable=yes, height=device-height, width=device-width, target-densityDpi=device-dpi" />');
	} else if ( (screen.width < 600) && (screen.width >= 500) ) {
		$("head").append('<meta name="viewport" content="initial-scale=.5, maximum-scale=1.0, minimum-scale=.5, user-scalable=yes, height=device-height, width=device-width, target-densityDpi=device-dpi" />');
	} else if ( (screen.width < 500) && (screen.width >= 400) ) {
		$("head").append('<meta name="viewport" content="initial-scale=.4, maximum-scale=1.0, minimum-scale=.5, user-scalable=yes, height=device-height, width=device-width, target-densityDpi=device-dpi" />');
	} else if ( (screen.width < 400) && (screen.width >= 300) ) {
		$("head").append('<meta name="viewport" content="initial-scale=.3, maximum-scale=1.0, minimum-scale=.5, user-scalable=yes, height=device-height, width=device-width, target-densityDpi=device-dpi" />');
	}//if screen.width
	
	
	<!-- Carga imagenes :hover al inicio -->
	/*if (document.images){
		//
		/*
		foto1 = new Image();
		foto1.src = "assets/ejer_07_top_dino2.png";* /
	}*/
	<!-- fin Carga imagenes -->
	
	// precarga
	//eliminamos el scroll de la pagina
	$("body").css({"overflow-y":"hidden"});
	//guardamos en una variable el alto del que tiene tu browser que no es lo mismo que del DOM
	var alto=$(window).height();
	//agregamos en el body un div que sera que ocupe toda la pantalla y se muestra encima de todo
	$("body").append("<div id='pre-load-web'><div id='imagen-load'><img src='img/preload35.gif' /></div>");
	//le damos el alto
	$("#pre-load-web").css({height:alto+"px"});
	//esta sera la capa que esta dento de la capa que muestra un gif
	$("#imagen-load").css({"margin-top":(alto/2)-30+"px"});
	// fin precarga
	
	if (window.orientation == 0){
		$("#turnScreen").fadeIn(0);
	}
	
	/* modal dialogs */
	//select all the a tag with name equal to modal
	$('a[name=modal]').click(function(e) {
		//Cancel the link behavior
		e.preventDefault();
		
		//Get the A tag
		var id = $(this).attr('href');
	
		//Get the screen height and width
		var maskHeight = $(document).height();
		var maskWidth = $(window).width();
	
		//Set heigth and width to mask to fill up the whole screen
		$('#mask').css({'width':maskWidth,'height':maskHeight});
		
		//transition effect		
		$('#mask').fadeIn(300);	
		$('#mask').fadeTo("slow",0.8);	
	
		//Get the window height and width
		var winH = $(window).height();
		var winW = $(window).width();
              
		//Set the popup window to center
		$(id).css('top',  winH/2-$(id).height()/2);
		$(id).css('left', winW/2-$(id).width()/2);
	
		//transition effect
		$(id).fadeIn(300); 
	
	});
	
	//if close button is clicked
	$('.window .close').click(function (e) {
		//Cancel the link behavior
		e.preventDefault();
		
		$('#mask').hide();
		$('.window').hide();
	});		
	
	//if mask is clicked
	$('#mask').click(function () {
		$(this).hide();
		$('.window').hide();
	});			

	$(window).resize(function () {
	 
 		var box = $('#boxes .window');
 
        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();
      
        //Set height and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});
               
        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        box.css('top',  winH/2 - box.height()/2);
        box.css('left', winW/2 - box.width()/2);
	 
	});
	/* fin modal dialogs */
	
}); <!--/fin document ready-->

</script>

<!-- arrastre -->
<script defer="defer">
function loadImages(sources, callback) {
	var assetDir = 'img/e06/';
	var images = {};
    var loadedImages = 0;
	var numImages = 0;
	for(var src in sources) {
		numImages++;
	}
    for(var src in sources) {
    	images[src] = new Image();
        images[src].onload = function() {
        	if(++loadedImages >= numImages) {
            	callback(images);
			}
		};
        images[src].src = assetDir + sources[src];
	}
}//fin loadImages
function isNearOutline(animal, outline) {
	var a = animal;
    var o = outline;
    //nuevo
    var ax = a.getX();
    var ay = a.getY();
    
	if(ax > o.x - 80 && ax < o.x + 80 && ay > o.y - 80 && ay < o.y + 80) {
    	return true;
	}
    //fin nuevo
    else {
    	return false;
	}
}//fin isNearOutline

function drawBackground(background, beachImg) {
	var canvas = background.getCanvas();
    var context = background.getContext();
    
	context.drawImage(beachImg, 0, 0);
}//fin drawBackground

function initStage(images) {
	var stage = stageB;
	
	var background = new Kinetic.Layer();
	var animalLayer = new Kinetic.Layer();
	var animalShapes = [];
	var score = 0;
	
	// image positions
	var animals = {
		img1: 	{ x: xCord1, y: yCord1 },
		img2: 	{ x: xCord2, y: yCord2 },
		img3: 	{ x: xCord3, y: yCord3 },
		img4: 	{ x: xCord4, y: yCord4 },
		img5: 	{ x: xCord5, y: yCord5 }
	};//fin animals
	
	var outlines = {
		img1_black: 	{ x: xbCord1, y: ybCord1 },
		img2_black: 	{ x: xbCord2, y: ybCord2 },
		img3_black: 	{ x: xbCord3, y: ybCord3 },
		img4_black: 	{ x: xbCord4, y: ybCord4 },
		img5_black: 	{ x: xbCord5, y: ybCord5 }
	};//fin outlines
	
	// create draggable animals
	for(var key in animals) {
		// anonymous function to induce scope
		(function() {
			var privKey = key;
			var anim = animals[key];
			
			var animal = new Kinetic.Image({
				image: images[key],
				x: anim.x,
				y: anim.y,
				draggable: true
			});
			
			//nuevo
			animal.createImageHitRegion();
			//fin nuevo
			
			animal.on('dragstart', function() {
				animal.moveToTop();
				animalLayer.draw();
				animal.lastXposition = animal.attrs.x;
				animal.lastYposition = animal.attrs.y;
			});
		
			/*
			* check if animal is in the right spot and
			* snap into place if it is
			*/
			animal.on('dragend', function() {
				var outline = outlines[privKey + '_black'];
				if(!animal.inRightPlace && isNearOutline(animal, outline)) {
					animal.attrs.x = outline.x;
					animal.attrs.y = outline.y;
					//nuevo
					animal.setPosition(outline.x, outline.y);
					//fin nuevo
					animalLayer.draw();
					//nuevo
					animal.inRightPlace = true;
					//fin nuevo
					
					if(++score >= 5) {
						var tscore = setTimeout(function() {
							$("#respuestaOk").fadeIn(100);
							//$('#container').remove();
							//$('#container').hide();
							//$('#pantalla02').append('<div id="container"></div>');
							//$('#container').fadeIn(300);
							clearTimeout(tscore);
						}, 300);
					}//end if score
		
					// disable drag and drop
					setTimeout(function() {
						animal.setDraggable(false);
					}, 50);
					//fin disable drag and drop
					
					audioElement.setAttribute('src', 'http://librosparatodoscr.com/apps/nociones/android/audio/btn.ogg');
					audioElement.play();
					
				} else {
					animal.transitionTo({
						x: animal.lastXposition,
						y: animal.lastYposition,
						duration: 0.5,
						easing: 'ease-in-out'
					});
									
				}//fin if
		});//fin animal dragend
		
		// make animal glow on mouseover
		animal.on('mouseover', function() {
			animal.setImage(images[privKey + '_glow']);
			animalLayer.draw();
			document.body.style.cursor = 'pointer';
		});
	
		// return animal on mouseout
		animal.on('mouseout', function() {
			animal.setImage(images[privKey]);
			animalLayer.draw();
			document.body.style.cursor = 'default';
		});
		
		animal.on('dragmove', function() {
			document.body.style.cursor = 'pointer';
		});
		
		animalLayer.add(animal);
		animalShapes.push(animal);
	})();//for key in animals
	
	}//fin initstage ?
	
	// create animal outlines
	for(var key in outlines) {
		// anonymous function to induce scope
		(function() {
			var imageObj = images[key];
			var out = outlines[key];
			
			var outline = new Kinetic.Image({
				image: imageObj,
				x: out.x,
				y: out.y
			});
			
			animalLayer.add(outline);
		})();
	}//fin for key in outlines
	
	stage.add(background);
	stage.add(animalLayer);
	
	drawBackground(background, images.beach);
}//fin initstage
</script>
<!-- fin arrastre -->


</head>
<body>


<div id="contenido">
	
    <div id="general">
		
		<div id="respuestaOk" class="pantallas">
            <div class="retro">
                <div id="icoOk" class="icoGrande"></div>
                <a id="icoClose" class="icoGrande" onclick="closeOk();" href="javascript:void(0)"></a>
                ¡Muy bien!<br />Relacionó los animales con los productos correctos
                <!--<a id="btnAgain" href="javascript:var proxEjercicio = 'index.html" onclick="flipPage();">¡Jugar de nuevo!</a>-->
            </div><!--/retro-->
            <a href="#dialog2" name="modal" id="logoAbajoLPT" style="margin-top:100px;"></a>
        </div><!--/respuestaOk-->
		
		<div id="pantalla01" class="pantallas">
			
			<a class="icoPeq icoInfoPeq" href="javascript:void(0)" onclick="goInfo();"></a>
			<a class="icoPeq icoHomePeq" href="javascript:var proxEjercicio = 'index.html'" onClick="flipPage();"></a>
			
			<div id="txG1" class="txBoxes">Arrastre cada animal a su respectivo producto</div>
			
			<div id="container1"></div>
			
		</div><!--/fin pantalla01-->
                
        <div id="pantalla00" class="pantallas">
            
            <div id="welcome">
                
                <div id="icoInfo" class="icoGrande"></div>
                <a id="icoClose" class="icoGrande" onclick="closeWelcome();" href="javascript:void(0)"></a>
                
                <div id="tituloApp">Correspondencia uno a uno</div>
                <div id="instru">Relacione cada animal con el producto que brinda al ser humano</div>
				
			</div><!--/fin welcome-->
            
			<a href="#dialog2" name="modal" id="logoAbajoLPT"></a>
			
		</div><!--/fin pantalla00-->
        
	</div><!--/fin general-->
	
    <!--
	<div id="boxNext">
		
		<h2>¡Felicidades!</h2>
		<br />
		Seleccionó correctamente los elementos.
        <br />
        Pulse el botón para continuar.
        <br /><br />
        <a href="javascript:var proxEjercicio = '02.html'" onClick="flipPage();" class="nextbtn">Siguiente</a>
		
	</div><!-- fin boxNext -->
	
	<div id="boxes"><!-- modal -->
		<div id="dialog2" class="window">
			
			<img src="img/logo_lpt.png" width="384" height="83" alt="Libros para Todos | Grupo Nación" id="logoCreditos" />
			<br /><br />
			<div id="creditosH">
				Libros para todos Grupo Nación &reg;
				<br />
				Contáctenos 800 366	2636 &bull; <a href="mailto:librosparatodoscr@nacion.com" style="color:#09C;">librosparatodoscr@nacion.com</a>
				<br />
				<a href="http://www.librosparatodoscr.com" target="_blank">www.librosparatodoscr.com</a>
			</div><!-- fin creditosH -->
			
			<div id="creditosB">
				<strong style="color:#09C;">Edici&oacute;n</strong> Grupo Naci&oacute;n GN S.A. 
				&bull;
				<strong style="color:#09C;">Gerente Corporativa de Estrategia</strong> Elvira Sabor&iacute;o Dobles
				&bull;
				<strong style="color:#09C;">Jefe de Libros para Todos</strong> Hanie Cordero Calder&oacute;n
				&bull;
				<strong style="color:#09C;">Supervisor Editorial</strong> Pamela Le&oacute;n C&eacute;spedes 
				&bull;
				<strong style="color:#09C;">Editora Ejecutiva</strong> D&eacute;bora Rojas Rodr&iacute;guez
				&bull;
				<strong style="color:#09C;">Coordinador de dise&ntilde;o</strong> Laura V&aacute;zques Alvarado
				&bull;
				<strong style="color:#09C;">Dise&ntilde;o</strong> Carlos Blanco Alvarado
				&bull;
				<strong style="color:#09C;">Ilustraci&oacute;n</strong> Sandra Ardila Z&uacute;&ntilde;iga / Ang&eacute;lica Ruiz Rodr&iacute;guez
				&bull;
				<strong style="color:#09C;">Programaci&oacute;n</strong> David Herrera Cordero
			</div><!-- fin creditosB -->
			
			<div id="creditosB" style="border-bottom:none;">
				Quedan reservados los derechos sobre la presente edición.
				Se prohíbe su reproducción sin el permiso previo y por escrito de <strong>Grupo Nación GN S.A.</strong>
				<br /><br />
				Las fotografías utilizadas en este material tienen fines educativos / Fotografías: www.shutterstock.com &bull; www.thinkstock.com <!--&bull; Archivo Grupo Nación GN S.A.-->
			</div><!-- fin creditosB -->
			
			<a  href="javascript:void(0)" class="close" id="btCloseCredits"></a>
		</div>
		<!-- Mask to cover the whole screen -->
		<div id="mask"></div>
	</div><!-- fin boxes modal -->

</div><!-- fin contenido -->

<div id="turnScreen"></div>

<script language="Javascript">
	document.oncontextmenu = function(){return false};
	document.onselectstart = function(){return false};
	//document.onkeydown = function(){return false};
</script>


</body>
</html>